from code.tests import testingtools
from code.search_code import searchdata
import pytest


def expected_tf():
    return [('http://people.scs.carleton.ca/~davidmckenney/fruits/N-77.html', 'banana', 0.2222222222222222),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-77.html', 'pear', 0.14444444444444443),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-77.html', 'peach', 0.2777777777777778),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-77.html', 'apple', 0.18888888888888888),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-77.html', 'coconut', 0.16666666666666666),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-77.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-718.html', 'banana', 0.14942528735632185),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-718.html', 'pear', 0.21839080459770116),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-718.html', 'peach', 0.14942528735632185),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-718.html', 'apple', 0.27586206896551724),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-718.html', 'coconut', 0.20689655172413793),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-718.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-743.html', 'banana', 0.2777777777777778),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-743.html', 'pear', 0.18055555555555555),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-743.html', 'peach', 0.09722222222222222),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-743.html', 'apple', 0.2222222222222222),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-743.html', 'coconut', 0.2222222222222222),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-743.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-253.html', 'banana', 0.24),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-253.html', 'pear', 0.16),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-253.html', 'peach', 0.28),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-253.html', 'apple', 0.2),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-253.html', 'coconut', 0.12),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-253.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-519.html', 'banana', 0.19753086419753085),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-519.html', 'pear', 0.12345679012345678),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-519.html', 'peach', 0.19753086419753085),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-519.html', 'apple', 0.2716049382716049),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-519.html', 'coconut', 0.20987654320987653),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-519.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-563.html', 'banana', 0.15730337078651685),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-563.html', 'pear', 0.14606741573033707),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-563.html', 'peach', 0.25842696629213485),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-563.html', 'apple', 0.2247191011235955),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-563.html', 'coconut', 0.21348314606741572),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-563.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-50.html', 'banana', 0.125),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-50.html', 'pear', 0.23958333333333334),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-50.html', 'peach', 0.19791666666666666),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-50.html', 'apple', 0.22916666666666666),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-50.html', 'coconut', 0.20833333333333334),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-50.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-514.html', 'banana', 0.1919191919191919),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-514.html', 'pear', 0.20202020202020202),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-514.html', 'peach', 0.1919191919191919),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-514.html', 'apple', 0.23232323232323232),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-514.html', 'coconut', 0.18181818181818182),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-514.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-195.html', 'banana', 0.18032786885245902),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-195.html', 'pear', 0.13114754098360656),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-195.html', 'peach', 0.21311475409836064),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-195.html', 'apple', 0.22950819672131148),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-195.html', 'coconut', 0.2459016393442623),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-195.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-959.html', 'banana', 0.16),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-959.html', 'pear', 0.22),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-959.html', 'peach', 0.16),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-959.html', 'apple', 0.24),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-959.html', 'coconut', 0.22),
            ('http://people.scs.carleton.ca/~davidmckenney/fruits/N-959.html', 'tomato', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/tinyfruits/N.html', 'banana', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/tinyfruits/N.html', 'pear', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/tinyfruits/N.html', 'peach', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/tinyfruits/N.html', 'apple', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/tinyfruits/N.html', 'coconut', 0.0),
            ('http://people.scs.carleton.ca/~davidmckenney/tinyfruits/N.html', 'tomato', 0.0),
            ]


@pytest.mark.parametrize('url, fruit, expected', expected_tf())
def test_tf(run_crawler, url, fruit, expected):
    result = searchdata.get_tf(url, fruit)
    assert testingtools.compare_doubles(result, expected)
